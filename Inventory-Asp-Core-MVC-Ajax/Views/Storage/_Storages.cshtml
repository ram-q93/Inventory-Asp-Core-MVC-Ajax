@using Inventory_Asp_Core_MVC_Ajax.Businesses
@model Inventory_Asp_Core_MVC_Ajax.Models.Classes.SearchStorage
@{int index = (Model.StorageModels.PageNumber * Model.StorageModels.PageSize) -
            (Model.StorageModels.PageSize - 1); }

@*For displaying storage info*@
@if (Model.StorageModels.Count() == 0)
{
<div class="alert alert-info">No Storages Availale</div> }
else
{
<form asp-controller="Storage" asp-action="Search" onsubmit="return jQueryAjaxPostToSearchStorage(this);" autocomplete="off">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <input  type="text" class="form-control">
        </div>
        <div class="form-group col-md-6">
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text">#</div>
                </div>
                <input type="text" class="form-control">
            </div>
        </div>
        <div class="form-group col-md-6">
            <input class="form-control" />
        </div>
    </div>
    <br />
    <div class="form-group">
        <input type="submit" value="Search" class="btn btn-success text-white btn-lg btn-block" />
    </div>

</form>
<table class="table">
    <thead>
        <tr>
            <th>
                #
            </th>
            <th>
                <label asp-for="@Model.StorageModels.FirstOrDefault().Name"></label>
            </th>
            <th>
                <label asp-for="@Model.StorageModels.FirstOrDefault().Phone"></label>
            </th>
            <th>
                <label asp-for="@Model.StorageModels.FirstOrDefault().Address"></label>
            </th>
            <th>
                <a onclick="showStorageInPopup('@Url.Action("AddOrEditStorage", "Storage",
                                               new { id = 0}, Context.Request.Scheme)', 'New Storage')"
                   class="btn btn-success text-white"><i class="fas fa-random"></i>New Storage</a>
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var s in Model.StorageModels)
        {
<tr>
    <td>
        @(index++)
    </td>
    <td>
        @Html.DisplayFor(m => s.Name)
    </td>
    <td>
        @Html.DisplayFor(m => s.Phone)
    </td>
    <td>
        @Html.DisplayFor(m => s.Address)
    </td>
    <td>
        <a asp-controller="Product" asp-action="Products" asp-route-storageId="@s.Id" class="btn btn-info">View Products</a>
    </td>
    <td>
        <a onclick="showStorageInPopup('@Url.Action("AddOrEditStorage", "Storage",
                                       new { id = s.Id}, Context.Request.Scheme)', 'Update Storage')"
           class="btn btn-warning text-white"><i class="fas fa-pencil-alt"></i></a>
        <form asp-controller="Storage" asp-action="DeleteStorage" asp-route-id="@s.Id"
              onsubmit="return jQueryAjaxDeleteStorage(this)" class="d-inline">
            <input type="hidden" asp-for="@s.Id" />
            <input type="submit" value="Delete" class="btn btn-danger" />
        </form>
    </td>
</tr>
}
    </tbody>
</table>}
<br />
<p class="align-items-center">
    <pager class="pager-container" list="@Model.StorageModels"
           options="@SitePagedListRenderOptions.Boostrap4" asp-action="Storages" asp-controller="Storage"
           asp-route-query="@Model.SearchQuery" />
</p>


